---
import Layout from '../components/Layout.astro';
---

<Layout title="Word Battle - Home">
    <div id="home-screen" class="screen active">
        <div class="input-group">
            <label for="player-name">Your Name</label>
            <input type="text" id="player-name" placeholder="Enter your name" maxlength="20">
        </div>
        <button id="create-room-btn">Create Room</button>
        <button id="join-room-btn">Join Room</button>
    </div>
</Layout>

<script>
    // Handle navigation to different pages
    document.addEventListener('DOMContentLoaded', () => {
        const playerNameInput = document.getElementById('player-name') as HTMLInputElement;
        const createRoomBtn = document.getElementById('create-room-btn');
        const joinRoomBtn = document.getElementById('join-room-btn');

        // Store player name in localStorage when navigating
        const storePlayerName = () => {
            const playerName = playerNameInput?.value.trim();
            if (playerName) {
                localStorage.setItem('playerName', playerName);
            }
        };

        createRoomBtn?.addEventListener('click', () => {
            const playerName = playerNameInput?.value.trim();
            if (!playerName) {
                alert('Please enter your name');
                return;
            }
            storePlayerName();
            window.location.href = '/create-room';
        });

        joinRoomBtn?.addEventListener('click', () => {
            const playerName = playerNameInput?.value.trim();
            if (!playerName) {
                alert('Please enter your name');
                return;
            }
            storePlayerName();
            window.location.href = '/join';
        });

        // Restore player name if returning to home page
        const savedPlayerName = localStorage.getItem('playerName');
        if (savedPlayerName && playerNameInput) {
            playerNameInput.value = savedPlayerName;
        }
    });
</script>